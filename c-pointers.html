<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>C - Pointers &mdash; Easwarnet  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="C - Function Pointers" href="c-funcpointers.html" />
    <link rel="prev" title="Os - RTOS" href="os-rtos.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Easwarnet
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">C++</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cpp-smartptr.html">C++ - Smart Pointer</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp-container.html">C++ - Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp-stdlib.html">C++ - StdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp-general.html">C++ - General</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="linux-posix.html">Linux - Posix</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux-commands.html">Linux - Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="os-general.html">Os - General Concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Embedded Beginner</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="os-rtos.html">Os - RTOS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">C - Pointers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ptr-increments"><strong>ptr increments</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#jump-to-address"><strong>Jump to address</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#const-char-p-and-char-const-p"><strong>const char* p and char const* p</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-pointer-variable"><strong>What is a pointer variable?</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#void-pointer"><strong>Void pointer</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#dangling-pointer"><strong>Dangling pointer:</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#types-of-pointer"><strong>Types of pointer</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-declarations"><strong>Data declarations</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="c-funcpointers.html">C - Function Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-general.html">C - General</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-basicalgo.html">C - Basic Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-tricks.html">C - Tricks and Others</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Easwarnet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>C - Pointers</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="c-pointers">
<h1>C - Pointers<a class="headerlink" href="#c-pointers" title="Permalink to this heading"></a></h1>
<section id="ptr-increments">
<h2><strong>ptr increments</strong><a class="headerlink" href="#ptr-increments" title="Permalink to this heading"></a></h2>
<p>++*ip increments what? it increments what ip points to</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">;</span>
<span class="c1">// suppose &amp;a = 4010 (address of a)</span>
</pre></div>
</div>
<p>Because both ++ and * are unary operators, the are calculated from right to left <code class="docutils literal notranslate"><span class="pre">–&gt;</span> <span class="pre">++</span> <span class="pre">(*p)</span></code>.</p>
<p>++*p will inrement 4010 by 4 (int size) -&gt; ++*p will have the value 4014.</p>
</section>
<hr class="docutils" />
<section id="jump-to-address">
<h2><strong>Jump to address</strong><a class="headerlink" href="#jump-to-address" title="Permalink to this heading"></a></h2>
<p>Inline assembly might be the easiest and most “elegant” solution, although doing this is highly unusual, unless you are writing a debugger or some specialized introspective system.</p>
<p>Another option might be to declare a pointer to a void function <code class="docutils literal notranslate"><span class="pre">(void</span> <span class="pre">(*foo)(void))</span></code>, then set the pointer to contain your address, and then invoke it:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">foo</span><span class="p">)(</span><span class="kt">void</span><span class="p">)</span> <span class="o">=</span> <span class="mh">0x12345678</span><span class="p">;</span>
<span class="n">foo</span><span class="p">();</span>
</pre></div>
</div>
<p>There will be things pushed on the stack since the compiler thinks you are doing a subroutine call, but since you don’t care about returning, this might work.</p>
<p>gcc has an extension that allows jumping to an arbitrary address:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="mh">0x1234567</span><span class="p">;</span>  <span class="c1">// a random memory address</span>
<span class="k">goto</span> <span class="o">*</span><span class="n">ptr</span><span class="p">;</span>                      <span class="c1">// jump there -- probably crash</span>
</pre></div>
</div>
<p>This is pretty much the same as using a function pointer that you set to a fixed value, but it will actually use a jump instruction rather than a call instruction (so the stack won’t be modified)</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">address</span><span class="o">=</span><span class="mh">0x80</span><span class="p">;</span>

<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">func_ptr</span><span class="p">)(</span><span class="kt">void</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="kt">void</span><span class="p">))</span><span class="n">address</span><span class="p">;</span>
<span class="n">func_ptr</span><span class="p">();</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="const-char-p-and-char-const-p">
<h2><strong>const char* p and char const* p</strong><a class="headerlink" href="#const-char-p-and-char-const-p" title="Permalink to this heading"></a></h2>
<p>Difference between const char* p and char const* p</p>
<p>In const char* p, the character pointed by ‘p’ is constant, so u cant
change the value of character pointed by p but u can make ‘p’ refer to
some other location.
in char const* p, the ptr ‘p’ is constant not the character referenced by
it, so u cant make ‘p’ to reference to any other location but u can
change the value of the char pointed by ‘p’.</p>
</section>
<hr class="docutils" />
<section id="what-is-a-pointer-variable">
<h2><strong>What is a pointer variable?</strong><a class="headerlink" href="#what-is-a-pointer-variable" title="Permalink to this heading"></a></h2>
<p>A pointer variable is a variable that may contain the address of another
variable or any valid address in the memory.
What is a pointer value and address?
A pointer value is a data object that refers to a memory location. Each
memory location is numbered in the memory. The number attached to
a memory location is called the address of the location.</p>
</section>
<hr class="docutils" />
<section id="void-pointer">
<h2><strong>Void pointer</strong><a class="headerlink" href="#void-pointer" title="Permalink to this heading"></a></h2>
<p>A void pointer is a C convention for a raw address. The compiler has no
idea what type of object a void Pointer really points to.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>If you write ``int *ip;``,
ip points to an int. If you write ``void *p;``, p does not point to a void.

In C and C++, any time you need a void pointer, you can use another
pointer type. For example, if you have a char*, you can pass it to a
function that expects a void*. You don’t even need to cast it. In C (but
not in C++), you can use a void* any time you need any kind of
pointer, without casting. (In C++, you need to cast it).
A void pointer is used for working with raw memory or for passing a
pointer to an unspecified type.
Some C code operates on raw memory. When C was first invented,
character pointers (char *) were used for that. Then people started
getting confused about when a character pointer was a string, when it
was a character array, and when it was raw memory.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="dangling-pointer">
<h2><strong>Dangling pointer:</strong><a class="headerlink" href="#dangling-pointer" title="Permalink to this heading"></a></h2>
<p>A dangling pointer points to memory that has already been freed. The storage is no longer allocated. Trying to access it might cause a Segmentation fault.</p>
<p>Common way to end up with a dangling pointer:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="o">*</span> <span class="nf">func</span><span class="p">()</span>
<span class="p">{</span>
   <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
   <span class="n">strcpy</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="s">&quot;Hello!&quot;</span><span class="p">);</span>
   <span class="k">return</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">//returned pointer points to str which has gone out of scope.</span>
</pre></div>
</div>
<p>You are returning an address which was a local variable, which would have gone out of scope by the time control was returned to the calling function. (Undefined behaviour)</p>
<p>Another common dangling pointer example is an access of a memory location via pointer, after free has been explicitly called on that memory.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="o">*</span><span class="n">c</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="n">free</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="o">*</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">//writing to freed location!</span>
</pre></div>
</div>
<p>A memory leak is memory which hasn’t been freed, there is no way to access (or free it) now, as there are no ways to get to it anymore. (E.g. a pointer which was the only reference to a memory location dynamically allocated (and not freed) which points somewhere else now.)</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">func</span><span class="p">(){</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">ch</span><span class="p">;</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">//ch not valid outside, no way to access malloc-ed memory</span>
</pre></div>
</div>
<p>Char-ptr ch is a local variable that goes out of scope at the end of the function, leaking the dynamically allocated 10 bytes.</p>
<p>States of Pointers - Null Pointer, Void Pointer, Dangling Pointer, Wild Pointer</p>
</section>
<hr class="docutils" />
<section id="types-of-pointer">
<h2><strong>Types of pointer</strong><a class="headerlink" href="#types-of-pointer" title="Permalink to this heading"></a></h2>
<p>A Pointer can be a Null Pointer or a Void Pointer or a Dangling Pointer or a Wild Pointer depending upon its state, which is defined by the operations performed on it or value it holds.</p>
<p><strong>Null pointer:</strong></p>
<p>Pointer assigned value NULL.
Example of null pointer:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="o">*</span><span class="n">ptr</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">;</span>
<span class="k">delete</span> <span class="n">ptr</span><span class="p">;</span>
<span class="n">ptr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// ptr is null pointer</span>
</pre></div>
</div>
<p><strong>Void pointer:</strong></p>
<p>Pointer of type void which can take address assigned from any other pointer (except function pointer) and can be reassigned to other pointer type. Void pointers cannot be dereferenced. They act as place holder.
Example of void pointer:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Dangling pointer:</strong></p>
<p>Pointer assigned some memory and then free that memory. After freeing when not assigned to NULL it still points to same memory address, such pointer are dangling pointer.
Example of dangling pointer:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="o">*</span> <span class="n">ptr</span><span class="o">=</span><span class="k">new</span> <span class="kt">int</span><span class="p">;</span>
<span class="o">&lt;</span><span class="n">some</span> <span class="n">ops</span> <span class="n">with</span> <span class="n">ptr</span> <span class="o">&gt;</span>
<span class="k">delete</span> <span class="n">ptr</span><span class="p">;</span> <span class="c1">// at this stage, ptr is dangling pointer</span>
</pre></div>
</div>
<p><strong>Wild pointer:</strong></p>
<p>Pointer which are not initialized during its definition holding some junk value( a valid address) are Wild pointer.
Example of wild pointer:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="data-declarations">
<h2><strong>Data declarations</strong><a class="headerlink" href="#data-declarations" title="Permalink to this heading"></a></h2>
<p><strong>Using the variable a, give definitions for the following:</strong>
a) An integer
b) A pointer to an integer
c) A pointer to a pointer to an integer
d) An array of 10 integers
e) An array of 10 pointers to integers
f) A pointer to an array of 10 integers
g) A pointer to a function that takes an integer as an argument and returns an integer
h) An array of ten pointers to functions that take an integer argument and return an integer</p>
<p>The answers are:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">)</span> <span class="kt">int</span> <span class="n">a</span><span class="p">;</span> <span class="c1">// An integer</span>
<span class="n">b</span><span class="p">)</span> <span class="kt">int</span> <span class="o">*</span><span class="n">a</span><span class="p">;</span> <span class="c1">// A pointer to an integer</span>
<span class="n">c</span><span class="p">)</span> <span class="kt">int</span> <span class="o">**</span><span class="n">a</span><span class="p">;</span> <span class="c1">// A pointer to a pointer to an integer</span>
<span class="n">d</span><span class="p">)</span> <span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span> <span class="c1">// An array of 10 integers</span>
<span class="n">e</span><span class="p">)</span> <span class="kt">int</span> <span class="o">*</span><span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span> <span class="c1">// An array of 10 pointers to integers</span>
<span class="n">f</span><span class="p">)</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">)[</span><span class="mi">10</span><span class="p">];</span> <span class="c1">// A pointer to an array of 10 integers</span>
<span class="n">g</span><span class="p">)</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span> <span class="c1">// A pointer to a function a that takes an integer argument and returns an integer</span>
<span class="n">h</span><span class="p">)</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">])(</span><span class="kt">int</span><span class="p">);</span> <span class="c1">// An array of 10 pointers to functions that take an integer argument and return an integer</span>
</pre></div>
</div>
<p>People often claim that a couple of these are the sorts of thing that one looks up in textbooks-and I agree. While writing this article, I consulted textbooks to ensure the syntax was correct. However, I expect to be asked this question (or something close to it) when I’m being interviewed. Consequently, I make sure I know the answers, at least for the few hours of the interview. Candidates who don’t know all the answers (or at least most of them) are simply unprepared for the interview. If they can’t be prepared for the interview, what will they be prepared for?</p>
<hr class="docutils" />
<p>test</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="os-rtos.html" class="btn btn-neutral float-left" title="Os - RTOS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="c-funcpointers.html" class="btn btn-neutral float-right" title="C - Function Pointers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Easwarnet.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>