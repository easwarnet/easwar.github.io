<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>C - Tricks and Others &mdash; Easwarnet  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Reference" href="reference.html" />
    <link rel="prev" title="C - Basic Algorithms" href="c-basicalgo.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Easwarnet
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">C++</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cpp-smartptr.html">C++ - Smart Pointer</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp-container.html">C++ - Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp-stdlib.html">C++ - StdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp-general.html">C++ - General</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="linux-posix.html">Linux - Posix</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux-commands.html">Linux - Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="os-general.html">Os - General Concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Embedded Beginner</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="os-rtos.html">Os - RTOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-pointers.html">C - Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-funcpointers.html">C - Function Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-general.html">C - General</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-basicalgo.html">C - Basic Algorithms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">C - Tricks and Others</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#malloc-sizeof-0"><strong>Malloc (sizeof(0))</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-does-scanf-see-the-input"><strong>How does scanf see the input?</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#unary-operator-precedence"><strong>Unary Operator Precedence</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-argument-vector"><strong>The argument vector</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-variables"><strong>Environment variables</strong></a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Easwarnet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>C - Tricks and Others</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="c-tricks-and-others">
<h1>C - Tricks and Others<a class="headerlink" href="#c-tricks-and-others" title="Permalink to this heading"></a></h1>
<section id="malloc-sizeof-0">
<h2><strong>Malloc (sizeof(0))</strong><a class="headerlink" href="#malloc-sizeof-0" title="Permalink to this heading"></a></h2>
<p>Malloc (sizeof(0)) will return - valid pointer</p>
<p>yes. sizeof(0) –&gt; int size and it is 4</p>
</section>
<hr class="docutils" />
<section id="how-does-scanf-see-the-input">
<h2><strong>How does scanf see the input?</strong><a class="headerlink" href="#how-does-scanf-see-the-input" title="Permalink to this heading"></a></h2>
<p>When scanf is called in a program it checks to see what is in the input file, that is, it checks to see what the user has typed in at the keyboard. Keyboard input is usually buffered. This means that the characters are held in a kind of waiting bay in the memory until they are read. The buffer can be thought of as a part of the input file stdin, holding some characters which can be scanned though. If the buffer has some characters in it, scanf will start to look through these; if not, it will wait for some characters to be put into the buffer.</p>
<p>There is an important point here: although scanf will start scanning through characters as soon as they are in the buffer, the operating system often sees to it that scanf doesn’t get to know about any of the characters until the user has pressed the RETURN or ENTER key on the computer or terminal. If the buffer is empty scanf will wait for some characters to be put into it.</p>
<p>To understand how scanf works, it is useful to think of the input as coming in lines. A line is a bunch of characters ending in a newline character <code class="docutils literal notranslate"><span class="pre">\n</span></code>. This can be represented by a box like the one below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 83%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>some…chars.738/.</p></td>
<td><p>\n</p></td>
</tr>
</tbody>
</table>
<p>As far as scanf is concerned, the input is entirely made out of a stream of characters. If the programmer says that an integer is to be expected by using the %d conversion specifier then scanf will try to make sense of the characters as an integer. In other words, it will look for some characters which make up a valid integer, such as a group of numbers all between 0 and 9. If the user says that floating point type is expected then it will look for a number which may or may not have a decimal point in it. If the user just wants a character then any character will do!</p>
</section>
<hr class="docutils" />
<section id="unary-operator-precedence">
<h2><strong>Unary Operator Precedence</strong><a class="headerlink" href="#unary-operator-precedence" title="Permalink to this heading"></a></h2>
<p>Unary operators are operators which have only a single operand: that is, they operate on only one object. For instance:</p>
<p><code class="docutils literal notranslate"><span class="pre">++</span>&#160; <span class="pre">--</span>&#160; <span class="pre">+</span>&#160; <span class="pre">-</span>&#160; <span class="pre">&amp;</span></code></p>
<p>The precedence of unary operators is from right to left so an expression like:</p>
<p><code class="docutils literal notranslate"><span class="pre">*ptr++;</span></code></p>
<p>would do <code class="docutils literal notranslate"><span class="pre">++</span></code>
before <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p>
</section>
<hr class="docutils" />
<section id="the-argument-vector">
<h2><strong>The argument vector</strong><a class="headerlink" href="#the-argument-vector" title="Permalink to this heading"></a></h2>
<p>C was written in order to implement Unix in a portable form. Unix was designed with a command language which was built up of independent programs. These could be passed arguments on the command line. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="o">/</span><span class="n">etc</span>
<span class="n">cc</span> <span class="o">-</span><span class="n">o</span> <span class="n">program</span> <span class="n">prog</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
<p>In these examples, the first word is the command itself, while the subsequent words are options and arguments to the command. We need some way getting this information into a C program. Unix solved this problem by passing C programs an array of these arguments together with their number as parameters to the function main(). Since then most other operating systems have adopted the same model, since it has become a part of the C language.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">main</span> <span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="n">argv</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">argc</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[];</span>
<span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The traditional names for the parameters are the argument count argc and the argument vector (array) argv. The operating system call which starts the C program breaks up the command line into an array, where the first element argv[0] is the name of the command itself and the last argument argv[argc-1] is the last argument. For example, in the case of</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cc</span> <span class="o">-</span><span class="n">o</span> <span class="n">program</span> <span class="n">prog</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
<p>would result in the values</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cc</span>
<span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="o">-</span><span class="n">o</span>
<span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">program</span>
<span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">prog</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
<p>The following program prints out the command line arguments:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">main</span> <span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="n">argv</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">argc</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[];</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

    <span class="n">printf</span> <span class="p">(</span><span class="s">&quot;This program is called %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;argv[%d] = %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Command has no arguments</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="environment-variables">
<h2><strong>Environment variables</strong><a class="headerlink" href="#environment-variables" title="Permalink to this heading"></a></h2>
<p>When we write a C program which reads command line arguments, they are fed to us by the argument vector. Unix processes also a set of text variable associations called environment variables. Each child process inherits the environment of its parent. The static environment variables are stored in a special array which is also passed to main() and can be read if desired.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">main</span> <span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="n">argv</span><span class="p">,</span><span class="n">envp</span><span class="p">)</span>

<span class="kt">int</span> <span class="n">argc</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[],</span> <span class="o">*</span><span class="n">envp</span><span class="p">[];</span>

<span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The array of strings envp[] is a list of values of the environment variables of the system, formatted by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NAME</span><span class="o">=</span><span class="n">value</span>
</pre></div>
</div>
<p>This gives C programmers access to the shell’s global environment.</p>
<p>In addition to the envp vector, it is possible to access the environment variables through the call getenv(). This is used as follows; suppose we want to access the shell environment variable $HOME.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="o">*</span><span class="n">string</span><span class="p">;</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s">&quot;HOME&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>string is now a pointer to static but public data. You should not use string as if it were you’re own property because it will be used again by the system. Copy it’s contents to another string before using the data.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
<span class="n">strcpy</span> <span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="n">string</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="c-basicalgo.html" class="btn btn-neutral float-left" title="C - Basic Algorithms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reference.html" class="btn btn-neutral float-right" title="Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Easwarnet.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>