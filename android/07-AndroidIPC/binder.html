<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>07-AndroidIPC - Binder &mdash; Easwarnet  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="07-AndroidIPC - HIDL - HAL Interface Descriptive Language" href="hidl.html" />
    <link rel="prev" title="06-NativeAppDevelopment - Logging and Debugging" href="../06-NativeAppDevelopment/loggingdebugging.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Easwarnet
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">C++</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-smartptr.html">C++ - Smart Pointer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-inheritence.html">C++ - Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-container.html">C++ - Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-stdlib.html">C++ - StdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-general.html">C++ - General</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../linux-posix.html">Linux - Posix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux-commands.html">Linux - Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../os-general.html">Os - General Concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AOSP</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/androidarchitecture.html">01-Introduction - Android Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/features.html">01-Introduction - Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/hardwarecompatibility.html">01-Introduction - Hardware Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/characteristics.html">01-Introduction - Characteristics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-AndroidBuildSystem/aospoverview.html">02-AndroidBuildSystem - AOSP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-AndroidBuildSystem/downloadaosp.html">02-AndroidBuildSystem - Download AOSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-AndroidBuildSystem/androidbuildsystem.html">02-AndroidBuildSystem - Android Build System in Detail</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-AndroidBuildSystem/buildingandroid.html">02-AndroidBuildSystem - Building Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-AndroidTools/adb.html">03-AndroidTools - ADB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-AndroidTools/fastboot.html">03-AndroidTools - Fastboot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-AndroidTools/othertools.html">03-AndroidTools - Other Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-SoftwareUpdate/flashingandroid.html">04-SoftwareUpdate - Flashing Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-SoftwareUpdate/ota.html">04-SoftwareUpdate - OTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-BootAndPartitions/bootsequence.html">05-BootAndPartitions - Boot Sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-BootAndPartitions/partitions.html">05-BootAndPartitions - Partitions in Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-BootAndPartitions/secureboot.html">05-BootAndPartitions - Secure Boot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-BootAndPartitions/treble.html">05-BootAndPartitions - Project Treble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/initrc.html">06-NativeAppDevelopment - Init RC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/selinux.html">06-NativeAppDevelopment - SELinux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/nativeapplications.html">06-NativeAppDevelopment - Native Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/ndk.html">06-NativeAppDevelopment - NDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/systemservices.html">06-NativeAppDevelopment - System Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/systemproperties.html">06-NativeAppDevelopment - System Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/hal.html">06-NativeAppDevelopment - Hardware Abstraction Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/vhal.html">06-NativeAppDevelopment - VHAL - Vehicle HAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/vndk.html">06-NativeAppDevelopment - Vendor Native Development Kit (VNDK)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-NativeAppDevelopment/loggingdebugging.html">06-NativeAppDevelopment - Logging and Debugging</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">07-AndroidIPC - Binder</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dev-binder">dev/binder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dev-vndbinder">dev/vndbinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dev-hwbinder">dev/hwbinder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#binder-communication">Binder Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#binder-communication-flow">Binder Communication Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#brief">Brief</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#binder-tokens">Binder Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reference-counting">Reference Counting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#link-to-death-or-death-recipient">Link-To-Death or Death Recipient</a></li>
<li class="toctree-l2"><a class="reference internal" href="#servicemanager">ServiceManager</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reference">Reference:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hidl.html">07-AndroidIPC - HIDL - HAL Interface Descriptive Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="aidl.html">07-AndroidIPC - Android Interface Definition Language (AIDL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-AppCoreComponents/activities.html">08-AppCoreComponents - Activities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-AppCoreComponents/services.html">08-AppCoreComponents - Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-AppCoreComponents/broadcast.html">08-AppCoreComponents - Broadcast Receivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-AppCoreComponents/contentproviders.html">08-AppCoreComponents - Content Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-TestFramework/cts.html">09-TestFramework - Android CTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-TestFramework/vts.html">09-TestFramework - Android VTS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Embedded Beginner</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../os-rtos.html">Os - RTOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-pointers.html">C - Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-funcpointers.html">C - Function Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-general.html">C - General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-basicalgo.html">C - Basic Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-tricks.html">C - Tricks and Others</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../profile.html"><strong>About</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../profile.html#coming-soon">Coming Soon</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Easwarnet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>07-AndroidIPC - Binder</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="androidipc-binder">
<h1>07-AndroidIPC - Binder<a class="headerlink" href="#androidipc-binder" title="Permalink to this heading"></a></h1>
<p>There are several techniques to achieve Inter-process communication like sockets, signals, pipes, message queues, semaphores, shared memory, etc. IPC communication can be acheived in Android using Binder Framework through AIDL and HIDL. Binder is an Android-specific IPC mechanism, which enables an RPC (remote procedure call) mechanism between the client and server processes. Client process can execute remote methods in the server process as if they were executed locally.</p>
<p>Android supports 3 IPC domains</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>/dev/binder</p></td>
<td><p>IPC between framework/app processes with AIDL interfaces.</p></td>
</tr>
<tr class="row-even"><td><p>/dev/hwbinder</p></td>
<td><div class="line-block">
<div class="line">IPC between framework/vendor processes with HIDL interfaces.</div>
<div class="line">IPC between vendor processes with AIDL/HIDL interfaces</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>/dev/vndbinder</p></td>
<td><p>IPC between framework/app processes with AIDL interfaces.</p></td>
</tr>
</tbody>
</table>
<p>From Android 8, the “/dev/binder” device node is designated as exclusive node of the framework process, which means that the vendor process can no longer access this node. Vendor processes can access “/dev/hwbinder” and use HIDL. However from Android 10, AIDL is being recommended instead of HIDL, since HIDL is soon to be deprecated.</p>
<section id="dev-binder">
<h2>dev/binder<a class="headerlink" href="#dev-binder" title="Permalink to this heading"></a></h2>
<p>This is the most common binder that is widely used. This acts as communication interface between App/Framework Processes or Services. On the implementation of Binder, Java inherits Binder Class and C++ inherits Bbbinder class.</p>
</section>
<section id="dev-vndbinder">
<h2>dev/vndbinder<a class="headerlink" href="#dev-vndbinder" title="Permalink to this heading"></a></h2>
<p>This binder is used as communication interface between vendor processes. Just like binder implementation, Java inherits Binder and C++ inherits Bbbinder. vndbinder is registered through the vndservicemanager process, and then the anonymous Binder object is passed through the Binder interface that has been created After getting BinderProxy or BpBinder.</p>
</section>
<section id="dev-hwbinder">
<h2>dev/hwbinder<a class="headerlink" href="#dev-hwbinder" title="Permalink to this heading"></a></h2>
<p>This binder is used as communication interface between vendor processes with Frameworks. Usually the Vendor BSP consists of hardware driver which needs to be interfaced with Android Frameworks. This is done through hwbinder.</p>
<section id="binder-communication">
<h3>Binder Communication<a class="headerlink" href="#binder-communication" title="Permalink to this heading"></a></h3>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/binder.png"><img alt="../../_images/binder.png" src="../../_images/binder.png" style="width: 770.0px; height: 500.0px;" /></a>
</figure>
</section>
<section id="binder-communication-flow">
<h3>Binder Communication Flow<a class="headerlink" href="#binder-communication-flow" title="Permalink to this heading"></a></h3>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/bindercall.png"><img alt="../../_images/bindercall.png" src="../../_images/bindercall.png" style="width: 536.0px; height: 529.0px;" /></a>
</figure>
</section>
<section id="brief">
<h3>Brief<a class="headerlink" href="#brief" title="Permalink to this heading"></a></h3>
<p>A process cannot access another process’s memory, however kernel has control over all processes and therefore can expose an interface that enables IPC. Binder interface /dev/binder device, is implemented by the Binder kernel driver. All the IPC calls go through Binder kernel driver.</p>
<p>The Binder driver manages part of the address space of each process. The Binder driver-managed chunk of memory is read-only to the process, and all writing is performed by the kernel module. When a process sends a message to another process, the kernel allocates some space in the destination process’s memory and copies the message data directly from the sending process. It then queues a short message to the receiving process telling it where the received message is. The recipient can then access that message directly (because it is in its own memory space).</p>
<p>Higher-level IPC abstractions in Android such as Intents and ContentProviders are some of the components that are built on top of Binder. Service interfaces that need to be exposed to other processes can be defined using the Android Interface Definition Language (AIDL), which enables clients to call remote services as if they were local Java objects.</p>
</section>
</section>
<section id="binder-tokens">
<h2>Binder Tokens<a class="headerlink" href="#binder-tokens" title="Permalink to this heading"></a></h2>
<p>Binder object instance maintains a unique identity across all processes in the system. Binder kernel driver allocates unique ID for each instance, making Binders unique. The application framework uses Binder tokens extensively in order to ensure secure interaction between cooperating processes. A client can create a Binder object to use as a token that can be shared with a server process, and the server can use it to validate the client’s requests without there being any way for others to sniff the communication exchange.</p>
</section>
<section id="reference-counting">
<h2>Reference Counting<a class="headerlink" href="#reference-counting" title="Permalink to this heading"></a></h2>
<p>Reference counting guarantees that Binder objects are automatically freed when no one references them. The binder kernel driver remembers a new object reference whenever a transaction happens. When a transaction occurs the reference count to that particular binder object is incremented. When a process dies, the reference count is automatically decremented. When a reference is no longer needed, its owner is notified and that binder object is released and removed from binder mapping.</p>
</section>
<section id="link-to-death-or-death-recipient">
<h2>Link-To-Death or Death Recipient<a class="headerlink" href="#link-to-death-or-death-recipient" title="Permalink to this heading"></a></h2>
<p>Binder’s “link-to-death” facility, allows a process to get a callback when another process hosting a binder object is freed or killed. The client can receive a callback when a Service dies. The callback is usually used to execute cleanup codes when death notification is received.</p>
</section>
<section id="servicemanager">
<h2>ServiceManager<a class="headerlink" href="#servicemanager" title="Permalink to this heading"></a></h2>
<p>The ServiceManager is the main process, which manages all the services of the system. It provides the functionality to register and find the corresponding services. ServiceManager works directly with the binder driver for required IPC.</p>
<section id="reference">
<h3>Reference:<a class="headerlink" href="#reference" title="Permalink to this heading"></a></h3>
<p>[1]: <code class="docutils literal notranslate"><span class="pre">https://mymusing.co/what-is-binder-in-android/</span></code></p>
<p>[2]: <code class="docutils literal notranslate"><span class="pre">https://developpaper.com/a-simple-example-of-binder/</span></code></p>
<p>[3]: <code class="docutils literal notranslate"><span class="pre">https://medium.com/android-news/android-binder-framework-8a28fb38699a</span></code></p>
<p>[4]: <code class="docutils literal notranslate"><span class="pre">https://www.androiddesignpatterns.com/2013/07/binders-window-tokens.html</span></code></p>
<p>[5]: <code class="docutils literal notranslate"><span class="pre">https://proandroiddev.com/binders-in-android-part-ii-reference-counting-death-recipients-19d55c8356c3</span></code></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../06-NativeAppDevelopment/loggingdebugging.html" class="btn btn-neutral float-left" title="06-NativeAppDevelopment - Logging and Debugging" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hidl.html" class="btn btn-neutral float-right" title="07-AndroidIPC - HIDL - HAL Interface Descriptive Language" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Easwarnet.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>