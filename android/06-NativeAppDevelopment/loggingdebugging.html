<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>06-NativeAppDevelopment - Logging and Debugging &mdash; Easwarnet  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="07-AndroidIPC - Binder" href="../07-AndroidIPC/binder.html" />
    <link rel="prev" title="06-NativeAppDevelopment - Vendor Native Development Kit (VNDK)" href="vndk.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Easwarnet
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">C++</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-smartptr.html">C++ - Smart Pointer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-inheritence.html">C++ - Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-container.html">C++ - Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-stdlib.html">C++ - StdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp-general.html">C++ - General</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../linux-posix.html">Linux - Posix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../linux-commands.html">Linux - Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../os-general.html">Os - General Concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AOSP</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/androidarchitecture.html">01-Introduction - Android Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/features.html">01-Introduction - Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/hardwarecompatibility.html">01-Introduction - Hardware Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/characteristics.html">01-Introduction - Characteristics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-AndroidBuildSystem/aospoverview.html">02-AndroidBuildSystem - AOSP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-AndroidBuildSystem/downloadaosp.html">02-AndroidBuildSystem - Download AOSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-AndroidBuildSystem/androidbuildsystem.html">02-AndroidBuildSystem - Android Build System in Detail</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-AndroidBuildSystem/buildingandroid.html">02-AndroidBuildSystem - Building Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-AndroidTools/adb.html">03-AndroidTools - ADB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-AndroidTools/fastboot.html">03-AndroidTools - Fastboot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-AndroidTools/othertools.html">03-AndroidTools - Other Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-SoftwareUpdate/flashingandroid.html">04-SoftwareUpdate - Flashing Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-SoftwareUpdate/ota.html">04-SoftwareUpdate - OTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-BootAndPartitions/bootsequence.html">05-BootAndPartitions - Boot Sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-BootAndPartitions/partitions.html">05-BootAndPartitions - Partitions in Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-BootAndPartitions/secureboot.html">05-BootAndPartitions - Secure Boot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-BootAndPartitions/treble.html">05-BootAndPartitions - Project Treble</a></li>
<li class="toctree-l1"><a class="reference internal" href="initrc.html">06-NativeAppDevelopment - Init RC</a></li>
<li class="toctree-l1"><a class="reference internal" href="selinux.html">06-NativeAppDevelopment - SELinux</a></li>
<li class="toctree-l1"><a class="reference internal" href="nativeapplications.html">06-NativeAppDevelopment - Native Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="ndk.html">06-NativeAppDevelopment - NDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="systemservices.html">06-NativeAppDevelopment - System Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="systemproperties.html">06-NativeAppDevelopment - System Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="hal.html">06-NativeAppDevelopment - Hardware Abstraction Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="vhal.html">06-NativeAppDevelopment - VHAL - Vehicle HAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="vndk.html">06-NativeAppDevelopment - Vendor Native Development Kit (VNDK)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">06-NativeAppDevelopment - Logging and Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#logging">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logging-message-types">Logging Message Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#logcat-command-line-tool">Logcat Command Line Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#crash-dumps-and-tombstones">Crash dumps and tombstones</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../07-AndroidIPC/binder.html">07-AndroidIPC - Binder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-AndroidIPC/hidl.html">07-AndroidIPC - HIDL - HAL Interface Descriptive Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-AndroidIPC/aidl.html">07-AndroidIPC - Android Interface Definition Language (AIDL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-AppCoreComponents/activities.html">08-AppCoreComponents - Activities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-AppCoreComponents/services.html">08-AppCoreComponents - Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-AppCoreComponents/broadcast.html">08-AppCoreComponents - Broadcast Receivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08-AppCoreComponents/contentproviders.html">08-AppCoreComponents - Content Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-TestFramework/cts.html">09-TestFramework - Android CTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-TestFramework/vts.html">09-TestFramework - Android VTS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Embedded Beginner</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../os-rtos.html">Os - RTOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-pointers.html">C - Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-funcpointers.html">C - Function Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-general.html">C - General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-basicalgo.html">C - Basic Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c-tricks.html">C - Tricks and Others</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../profile.html"><strong>About</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../profile.html#coming-soon">Coming Soon</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Easwarnet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>06-NativeAppDevelopment - Logging and Debugging</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nativeappdevelopment-logging-and-debugging">
<h1>06-NativeAppDevelopment - Logging and Debugging<a class="headerlink" href="#nativeappdevelopment-logging-and-debugging" title="Permalink to this heading"></a></h1>
<p>This topic covers the way to Logging, Log Analysis and Debugging netive applications in Android.</p>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this heading"></a></h2>
<p>Android uses Logcat tool to display Logs on ADB Console or Logcat window of Android studio. Android Logging in general displays the system messages, garbage collection as and when it occur. The logs are displayed in realtime and also keeps the history.</p>
<section id="logging-message-types">
<h3>Logging Message Types<a class="headerlink" href="#logging-message-types" title="Permalink to this heading"></a></h3>
<p>Following are the Logging Message types display from the highest to lowest priority.</p>
<p><strong>C++:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">ALOGE</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="n">message</span><span class="p">);</span> <span class="c1">//Error Message</span>
<span class="n">ALOGW</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="n">message</span><span class="p">);</span> <span class="c1">//Warning Message</span>
<span class="n">ALOGI</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="n">message</span><span class="p">);</span> <span class="c1">//Information Message</span>
<span class="n">ALOGD</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="n">message</span><span class="p">);</span> <span class="c1">//Debug Message</span>
<span class="n">ALOGV</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="n">message</span><span class="p">);</span> <span class="c1">//Verbose Message</span>
</pre></div>
</div>
<p><strong>Java:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Log</span><span class="p">.</span><span class="n">e</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="p">);</span> <span class="c1">//Error Message</span>
<span class="n">Log</span><span class="p">.</span><span class="n">w</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="p">);</span> <span class="c1">//Warning Message</span>
<span class="n">Log</span><span class="p">.</span><span class="n">i</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="p">);</span> <span class="c1">//Information Message</span>
<span class="n">Log</span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="p">);</span> <span class="c1">//Debug Message</span>
<span class="n">Log</span><span class="p">.</span><span class="n">v</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="p">);</span> <span class="c1">//Verbose Message</span>
</pre></div>
</div>
</section>
</section>
<section id="logcat-command-line-tool">
<h2>Logcat Command Line Tool<a class="headerlink" href="#logcat-command-line-tool" title="Permalink to this heading"></a></h2>
<p><strong>Options</strong></p>
<p>The following table describes the command line options of logcat.</p>
<p>Option and Description</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">b</span> <span class="o">&lt;</span><span class="n">buffer</span><span class="o">&gt;</span>
<span class="n">Loads</span> <span class="n">an</span> <span class="n">alternate</span> <span class="n">log</span> <span class="n">buffer</span> <span class="k">for</span> <span class="n">viewing</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span> <span class="n">event</span> <span class="ow">or</span> <span class="n">radio</span><span class="o">.</span> <span class="n">The</span> <span class="n">main</span> <span class="n">buffer</span> <span class="ow">is</span> <span class="n">used</span> <span class="n">by</span> <span class="n">default</span><span class="o">.</span> <span class="n">See</span> <span class="n">Viewing</span> <span class="n">Alternative</span> <span class="n">Log</span> <span class="n">Buffers</span><span class="o">.</span>

<span class="o">-</span><span class="n">c</span>
<span class="n">Clears</span> <span class="p">(</span><span class="n">flushes</span><span class="p">)</span> <span class="n">the</span> <span class="n">entire</span> <span class="n">log</span> <span class="ow">and</span> <span class="n">exits</span><span class="o">.</span>

<span class="o">-</span><span class="n">d</span>
<span class="n">Dumps</span> <span class="n">the</span> <span class="n">log</span> <span class="n">to</span> <span class="n">the</span> <span class="n">screen</span> <span class="ow">and</span> <span class="n">exits</span><span class="o">.</span>

<span class="o">-</span><span class="n">f</span> <span class="o">&lt;</span><span class="n">filename</span><span class="o">&gt;</span>
<span class="n">Writes</span> <span class="n">log</span> <span class="n">message</span> <span class="n">output</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">filename</span><span class="o">&gt;.</span> <span class="n">The</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">stdout</span><span class="o">.</span>

<span class="o">-</span><span class="n">g</span>
<span class="n">Prints</span> <span class="n">the</span> <span class="n">size</span> <span class="n">of</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">log</span> <span class="n">buffer</span> <span class="ow">and</span> <span class="n">exits</span><span class="o">.</span>

<span class="o">-</span><span class="n">n</span> <span class="o">&lt;</span><span class="n">count</span><span class="o">&gt;</span>
<span class="n">Sets</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">rotated</span> <span class="n">logs</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">count</span><span class="o">&gt;.</span> <span class="n">The</span> <span class="n">default</span> <span class="n">value</span> <span class="ow">is</span> <span class="mf">4.</span> <span class="n">Requires</span> <span class="n">the</span> <span class="o">-</span><span class="n">r</span> <span class="n">option</span><span class="o">.</span>

<span class="o">-</span><span class="n">r</span> <span class="o">&lt;</span><span class="n">kbytes</span><span class="o">&gt;</span>
<span class="n">Rotates</span> <span class="n">the</span> <span class="n">log</span> <span class="n">file</span> <span class="n">every</span> <span class="o">&lt;</span><span class="n">kbytes</span><span class="o">&gt;</span> <span class="n">of</span> <span class="n">output</span><span class="o">.</span> <span class="n">The</span> <span class="n">default</span> <span class="n">value</span> <span class="ow">is</span> <span class="mf">16.</span> <span class="n">Requires</span> <span class="n">the</span> <span class="o">-</span><span class="n">f</span> <span class="n">option</span><span class="o">.</span>

<span class="o">-</span><span class="n">s</span>
<span class="n">Sets</span> <span class="n">the</span> <span class="n">default</span> <span class="nb">filter</span> <span class="n">spec</span> <span class="n">to</span> <span class="n">silent</span><span class="o">.</span>

<span class="o">-</span><span class="n">v</span> <span class="o">&lt;</span><span class="nb">format</span><span class="o">&gt;</span>
<span class="n">Sets</span> <span class="n">the</span> <span class="n">output</span> <span class="nb">format</span> <span class="k">for</span> <span class="n">log</span> <span class="n">messages</span><span class="o">.</span> <span class="n">The</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">brief</span> <span class="nb">format</span><span class="o">.</span> <span class="n">For</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">supported</span> <span class="n">formats</span><span class="p">,</span> <span class="n">see</span> <span class="n">Controlling</span> <span class="n">Log</span> <span class="n">Output</span> <span class="n">Format</span><span class="o">.</span>
</pre></div>
</div>
<p><strong>Logcat - Useful Command</strong></p>
<p>Logcat commands can be used in adb console. Following are some useful commands used to debug or display Log messages</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>adb_shell$ logcat -b &lt;service&gt;
View the buffer that contains specified service related messages. eg gnss, sensor, radio

adb_shell$ logcat -b event
View the buffer containing events-related messages.

adb_shell$ logcat -b main
default

adb_shell$ logcat -c
Clears the entire log and exits.

adb_shell$ logcat -d
Dumps the log to the screen and exits.

adb_shell$ logcat -f logs.text
Writes log message output to logs.text

adb_shell$ logcat -g
Prints the size of the specified log buffer and exits.

adb_shell$ logcat -n &lt;count&gt;
Sets the maximum number of rotated logs to &lt;count&gt;.

adb_shell$ logcat -r &lt;kbytes&gt;
Rotates the log file every &lt;kbytes&gt; of output. The default value is <span class="m">16</span>. Requires the -f option.

adb_shell$ logcat -v brief
Display priority/tag and PID of the process issuing the message <span class="o">(</span>default format<span class="o">)</span>.

adb_shell$ logcat -v process
Display PID only.

adb_shell$ logcat -v tag
Display the priority/tag only.

adb_shell$ logcat -v raw
Display the raw log message, with no other metadata fields.

adb_shell$ logcat -v <span class="nb">time</span>
Display the date, invocation time, priority/tag, and PID of the process issuing the message.

adb_shell$ logcat -v threadtime
Display the date, invocation time, priority, tag, and the PID and TID of the thread issuing the message.

adb_shell$ logcat -v long
Display all metadata fields and separate messages with blank lines.
</pre></div>
</div>
</section>
<section id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this heading"></a></h2>
<p>GDB can be used to debug a native application.</p>
<p><strong>Set GDB Server on Device:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Set SeLinux to permissive mode
<span class="c1"># su -c setenforce 0</span>

Push the gdbserver to the device
<span class="c1"># adb push ~/android-sdk-linux/ndk-bundle/prebuilt/android-&lt;arch&gt;/gdbserver/gdbserver /data/local/tmp</span>

Change permissions of gdbserver to Executable
adb_shell$ chmod <span class="m">777</span> /data/local/tmp/gdbserver

Initiate the forwarding of a TCP port on which GDB
adb forward tcp:5555 tcp:5555

Run the Application with GDB
adb_shell$ ./data/local/tmp/gdbserver :5555 ./&lt;path&gt;/testapplication

If above <span class="k">case</span> doesnot work, fetch the pid of the process by using <span class="nb">command</span>
adb_shell$ ps <span class="p">|</span> grep testapplication
adb_shell$ ./data/local/tmp/gdbserver :5555 &lt;PID of testapplication&gt;

The application will <span class="nb">wait</span> <span class="k">for</span> the client to connect
</pre></div>
</div>
<p><strong>Set GDB Client on Host PC:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>hostpc$ aarch64-linux-android-gdb
hostpc$ <span class="nb">set</span> sysroot
hostpc$ target remote &lt;device-ip-address&gt;:&lt;<span class="m">5555</span>&gt;
hostpc$ <span class="k">continue</span>
</pre></div>
</div>
<p>Following this you will be able to debug the application that runs on target device from HostPC.</p>
</section>
<section id="crash-dumps-and-tombstones">
<h2>Crash dumps and tombstones<a class="headerlink" href="#crash-dumps-and-tombstones" title="Permalink to this heading"></a></h2>
<p>When a service crashes, a crash dump is written to logcat and a more detailed tombstone file is generated in path /data/tombstones/. The tombstone contains stack traces for all the threads in the crashing process, a full memory map, and a list of all open file descriptors.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vndk.html" class="btn btn-neutral float-left" title="06-NativeAppDevelopment - Vendor Native Development Kit (VNDK)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../07-AndroidIPC/binder.html" class="btn btn-neutral float-right" title="07-AndroidIPC - Binder" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Easwarnet.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>